<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>포트폴리오 | RECOCULTURE</title>
<meta name="description" content="레코컬쳐의 실제 성과 사례. 전문직 유튜브 채널 운영을 통해 달성한 비즈니스 성장 결과를 확인하세요.">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Outfit:wght@300;400;500;600;700;800;900&family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<style>
/* ===== LIVE COUNTER ===== */
.live-counter {
  padding: 60px 48px 40px;
  text-align: center;
  background: var(--bg-primary);
  position: relative;
}
.live-counter__label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 20px;
}
.live-counter__label .orange { color: var(--orange); font-weight: 700; }
.live-counter__pulse {
  display: inline-block;
  width: 8px; height: 8px;
  background: #22c55e;
  border-radius: 50%;
  margin-right: 8px;
  animation: pulse 2s ease-in-out infinite;
  vertical-align: middle;
}
@keyframes pulse {
  0%,100% { opacity:1; transform:scale(1); }
  50% { opacity:0.5; transform:scale(0.8); }
}
.live-counter__number {
  font-family: 'Inter', var(--font-en), sans-serif;
  font-size: clamp(48px, 8vw, 88px);
  font-weight: 800;
  color: var(--text-primary);
  line-height: 1;
  margin-bottom: 12px;
  display: inline-flex;
  justify-content: center;
  align-items: flex-end;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
  padding: 0 4px;
}
.live-counter__digit {
  display: inline-block;
  height: 1em;
  width: 0.64em;
  overflow: hidden;
  line-height: 1;
}
.live-counter__digit-inner {
  display: block;
  transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  will-change: transform;
}
.live-counter__digit-inner span {
  display: block;
  height: 1em;
  line-height: 1;
  text-align: center;
}
.live-counter__sep {
  display: inline-flex;
  align-items: flex-end;
  justify-content: center;
  width: 0.22em;
  height: 1em;
  color: var(--orange);
  font-weight: 400;
  font-size: 0.55em;
  padding-bottom: 0.08em;
}
.live-counter__unit {
  font-size: 13px;
  color: var(--text-tertiary);
  font-weight: 500;
}

/* ===== BUBBLE MAP ===== */
.bubble-map {
  position: relative;
  width: 100%;
  min-height: 80vh;
  overflow: hidden;
  background: var(--bg-primary);
  cursor: grab;
  user-select: none;
}
.bubble-map:active { cursor: grabbing; }
.bubble-map__container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.bubble {
  position: absolute;
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.25s cubic-bezier(0.23,1,0.32,1), box-shadow 0.25s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}
.bubble:hover {
  transform: scale(1.15);
  z-index: 100 !important;
  box-shadow: 0 8px 30px rgba(237,108,0,0.25);
}
.bubble__inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-en);
  font-weight: 700;
  color: white;
  text-align: center;
  line-height: 1.1;
  overflow: hidden;
}

/* Tooltip (썸네일 팝업) */
.bubble-tooltip {
  position: fixed;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  transform: scale(0.8) translateY(8px);
  transition: opacity 0.2s, transform 0.25s cubic-bezier(0.23,1,0.32,1);
  width: 320px;
  background: var(--white);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  overflow: hidden;
  border: 1px solid var(--border);
}
.bubble-tooltip.is-visible {
  opacity: 1;
  transform: scale(1) translateY(0);
}
.bubble-tooltip__thumb {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
  display: block;
}
.bubble-tooltip__body {
  padding: 14px 16px;
}
.bubble-tooltip__channel {
  font-family: var(--font-en);
  font-size: 11px;
  font-weight: 700;
  color: var(--orange);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 4px;
}
.bubble-tooltip__title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.4;
  margin-bottom: 6px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.bubble-tooltip__views {
  font-family: var(--font-en);
  font-size: 12px;
  color: var(--text-tertiary);
}
.bubble-tooltip__views strong {
  color: var(--orange);
}

/* Legend */
.bubble-legend {
  display: flex;
  justify-content: center;
  gap: 24px;
  padding: 24px 48px 60px;
  background: var(--bg-primary);
  flex-wrap: wrap;
}
.bubble-legend__item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-tertiary);
}
.bubble-legend__dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

@media (max-width: 768px) {
  .live-counter { padding: 40px 24px 24px; }
  .bubble-map { min-height: 60vh; }
  .bubble-tooltip { width: 260px; }
  .bubble-legend { padding: 16px 24px 40px; gap: 12px; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <a href="/" class="nav__logo">REC<span class="rc-o">O</span>CULTURE</a>
  <ul class="nav__links">
    <li><a href="/" class="nav__link">Home</a></li>
    <li><a href="/portfolio.html" class="nav__link nav__link--active">Portfolio</a></li>
    <li><a href="/services.html" class="nav__link">Services</a></li>
    <li><a href="/careers.html" class="nav__link">Careers</a></li>
    <li><a href="/services.html#contact" class="nav__cta">무료 상담</a></li>
  </ul>
  <div class="nav__hamburger" onclick="document.querySelector('.nav__mobile-menu').classList.toggle('is-open')">
    <span></span><span></span><span></span>
  </div>
</nav>
<div class="nav__mobile-menu">
  <a href="/">Home</a>
  <a href="/portfolio.html" class="nav__link--active">Portfolio</a>
  <a href="/services.html">Services</a>
  <a href="/careers.html">Careers</a>
  <a href="/services.html#contact">무료 상담</a>
</div>

<!-- PAGE HERO -->
<section class="page-hero" style="padding-bottom: 40px;">
  <div class="page-hero__bg"></div>
  <div class="page-hero__content">
    <p class="page-hero__label">Portfolio</p>
    <h1 class="page-hero__title">우리가 만든<br><em>채널의 성과</em></h1>
    <p class="page-hero__desc">543개 영상. 10개 채널. 각 원의 크기는 조회수에 비례합니다.</p>
  </div>
</section>

<!-- LIVE COUNTER -->
<section class="live-counter">
  <p class="live-counter__label"><span class="live-counter__pulse"></span>레코컬쳐에서 만든 영상의 <span class="orange">누적 조회수</span></p>
  <div class="live-counter__number" id="counter-display">0</div>
  <p class="live-counter__unit">views and counting</p>
</section>

<!-- BUBBLE MAP -->
<div class="bubble-map" id="bubble-map"></div>

<!-- LEGEND -->
<div class="bubble-legend" id="bubble-legend"></div>

<!-- TOOLTIP -->
<div class="bubble-tooltip" id="tooltip">
  <img class="bubble-tooltip__thumb" id="tt-thumb" src="" alt="">
  <div class="bubble-tooltip__body">
    <div class="bubble-tooltip__channel" id="tt-channel"></div>
    <div class="bubble-tooltip__title" id="tt-title"></div>
    <div class="bubble-tooltip__views" id="tt-views"></div>
  </div>
</div>

<!-- CTA -->
<section class="cta-section">
  <h2 class="cta-section__title">다음 성공 사례의<br><span style="color: var(--orange)">주인공이 되세요</span></h2>
  <p class="cta-section__desc">무료 상담으로 채널 성장 전략을 확인하세요.</p>
  <a href="/services.html#contact" class="btn btn--primary" style="font-size: 17px; padding: 18px 48px;">무료 상담 신청하기 <span class="btn__arrow">→</span></a>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer__top">
    <div>
      <div class="footer__logo">REC<span class="rc-o">O</span>CULTURE</div>
      <p class="footer__tagline">전문직 유튜브 미디어 브랜딩</p>
    </div>
    <div class="footer__links">
      <div class="footer__col">
        <div class="footer__col-title">Menu</div>
        <a href="/">Home</a>
        <a href="/portfolio.html">Portfolio</a>
        <a href="/services.html">Services</a>
        <a href="/careers.html">Careers</a>
      </div>
      <div class="footer__col">
        <div class="footer__col-title">Contact</div>
        <a href="mailto:og@recoculture.com">og@recoculture.com</a>
        <a href="tel:01027495144">010-2749-5144</a>
        <a href="http://pf.kakao.com/_PxfyFn/chat">KakaoTalk →</a>
      </div>
    </div>
  </div>
  <div class="footer__bottom">
    <p class="footer__copy">© 2025 RECOCULTURE CO., LTD. All rights reserved. 주식회사 레코컬쳐</p>
    <div class="footer__legal">
      <a href="#">이용약관</a>
      <a href="#">개인정보처리방침</a>
    </div>
  </div>
</footer>

<script>
// ===== CHANNEL COLORS =====
const CHANNEL_COLORS = {
  '이바다이야기': '#ED6C00',
  '친절한 송이씨': '#E8488A',
  '권의시선': '#3B82F6',
  '하원장 강동현': '#8B5CF6',
  'Prepatina 차랑꾼': '#1a1a1a',
  '태오네모세모': '#06B6D4',
  '진로사이다': '#F59E0B',
  '바른의사 백승우': '#10B981',
  '우선이선우': '#EC4899',
  '이태호 수의사': '#6366F1',
};

// ===== LIVE COUNTER =====
(function() {
  const API_KEY = 'AIzaSyDegAUyaLZzxZOmqPZ7Cknr6BLQVo_Z1Zk';
  const CHANNELS = [
    'UCa4XAtZ_04zXUAh28HFbJQw','UCa16_cbdgo7BDjHbJvJowGw',
    'UCdRgh9GCeMs8Bo86QMSuiuA','UCvQCmSsCRb8z3q0SO5JW8Pw',
    'UCQs5sRayqKqrdxTaV38OVRA','UCj_RY4FlDqfafum6Gy5nUiA',
    'UCDy8IPYmRu6WbDUyAs1ffyg','UC9yDBiSGrXpooefuaXO6BaA',
    'UC2kME1ttakYQVNxBQJJo6Sw','UCwDwL7htetGbWwypB1sYK5A',
  ];
  const FALLBACK = 56923406;
  const el = document.getElementById('counter-display');
  let current = 0, vps = 0.5, lastDisplay = -1, started = false;
  let digitEls = [], lastChars = [], built = false;

  function buildSlots(s) {
    el.innerHTML = ''; digitEls = []; lastChars = [];
    for (const ch of s) {
      if (ch === ',') {
        const sep = document.createElement('span');
        sep.className = 'live-counter__sep'; sep.textContent = ',';
        el.appendChild(sep); digitEls.push(null); lastChars.push(',');
      } else {
        const w = document.createElement('span'); w.className = 'live-counter__digit';
        const inner = document.createElement('span'); inner.className = 'live-counter__digit-inner';
        for (let d=0;d<=9;d++){const s2=document.createElement('span');s2.textContent=d;inner.appendChild(s2);}
        w.appendChild(inner); el.appendChild(w);
        inner.style.transition='none'; inner.style.transform=`translateY(-${parseInt(ch)}em)`;
        digitEls.push(inner); lastChars.push(ch);
      }
    }
    built = true;
    requestAnimationFrame(()=>{ digitEls.forEach(i=>{if(i)i.style.transition='';}); });
  }
  function setDigits(s) {
    if (!built || s.length !== lastChars.length) { buildSlots(s); return; }
    for (let i=0;i<s.length;i++) {
      const ch=s[i];
      if(ch!==','&&ch!==lastChars[i]&&digitEls[i]){digitEls[i].style.transform=`translateY(-${parseInt(ch)}em)`;lastChars[i]=ch;}
    }
  }
  function fmt(n){return Math.floor(n).toLocaleString('en-US');}
  async function fetchTotal(){
    try{
      const r=await fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${CHANNELS.join(',')}&key=${API_KEY}`);
      const d=await r.json(); if(!d.items)throw 0;
      let t=0; d.items.forEach(c=>{t+=parseInt(c.statistics.viewCount||0);});
      const c2=JSON.parse(localStorage.getItem('rc_counter')||'null');
      if(c2&&t>c2.v){const dt=(Date.now()-c2.t)/1000;if(dt>300)vps=Math.max(0.1,(t-c2.v)/dt);}
      localStorage.setItem('rc_counter',JSON.stringify({v:t,t:Date.now(),vps}));
      return t;
    }catch(e){
      const c2=JSON.parse(localStorage.getItem('rc_counter')||'null');
      if(c2){vps=c2.vps||0.5;return c2.v+Math.floor((Date.now()-c2.t)/1000*vps);}
      return FALLBACK;
    }
  }
  function startTick(){
    if(started)return; started=true; let last=performance.now();
    function tick(now){const dt=(now-last)/1000;last=now;current+=vps*dt;const r=Math.floor(current);if(r!==lastDisplay){lastDisplay=r;setDigits(fmt(r));}requestAnimationFrame(tick);}
    requestAnimationFrame(tick);
  }
  fetchTotal().then(t=>{current=t;buildSlots(fmt(t));lastDisplay=t;setTimeout(()=>startTick(),500);setInterval(async()=>{const f=await fetchTotal();if(f>current)current=f;},3600000);});
})();

// ===== BUBBLE MAP =====
(function() {
  const mapEl = document.getElementById('bubble-map');
  const tooltip = document.getElementById('tooltip');
  const ttThumb = document.getElementById('tt-thumb');
  const ttChannel = document.getElementById('tt-channel');
  const ttTitle = document.getElementById('tt-title');
  const ttViews = document.getElementById('tt-views');
  const legendEl = document.getElementById('bubble-legend');

  // Size mapping: size 1→12px, size 10→70px
  function getRadius(size) { return 8 + size * 6; }

  // Pack circles in a roughly circular/organic layout
  function layoutBubbles(videos) {
    const n = videos.length;
    const sorted = [...videos].sort((a, b) => b.s - a.s); // big ones first for packing
    const placed = [];
    const centerX = 0, centerY = 0;

    for (let i = 0; i < sorted.length; i++) {
      const r = getRadius(sorted[i].s);
      let bestX = 0, bestY = 0, bestDist = Infinity;

      // Spiral placement
      const angle = i * 2.399963; // golden angle
      const spiralR = Math.sqrt(i) * (r * 1.1 + 4);
      let cx = centerX + Math.cos(angle) * spiralR;
      let cy = centerY + Math.sin(angle) * spiralR;

      // Push away from overlaps
      for (let iter = 0; iter < 20; iter++) {
        let overlap = false;
        for (const p of placed) {
          const dx = cx - p.x, dy = cy - p.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          const minDist = r + p.r + 3;
          if (dist < minDist) {
            const push = (minDist - dist) / 2 + 0.5;
            const nx = dx / (dist || 1), ny = dy / (dist || 1);
            cx += nx * push;
            cy += ny * push;
            overlap = true;
          }
        }
        if (!overlap) break;
      }

      sorted[i]._x = cx;
      sorted[i]._y = cy;
      sorted[i]._r = r;
      placed.push({ x: cx, y: cy, r });
    }
    return sorted;
  }

  fetch('portfolio-data-compact.json')
    .then(r => r.json())
    .then(videos => {
      const laid = layoutBubbles(videos);

      // Find bounds
      let minX=Infinity,maxX=-Infinity,minY=Infinity,maxY=-Infinity;
      laid.forEach(v => {
        minX = Math.min(minX, v._x - v._r);
        maxX = Math.max(maxX, v._x + v._r);
        minY = Math.min(minY, v._y - v._r);
        maxY = Math.max(maxY, v._y + v._r);
      });
      const w = maxX - minX + 40, h = maxY - minY + 40;

      const container = document.createElement('div');
      container.className = 'bubble-map__container';
      container.style.width = w + 'px';
      container.style.height = h + 'px';
      container.style.position = 'relative';

      laid.forEach((v, idx) => {
        const el = document.createElement('a');
        el.className = 'bubble';
        el.href = `https://www.youtube.com/watch?v=${v.i}`;
        el.target = '_blank';
        const d = v._r * 2;
        const color = CHANNEL_COLORS[v.c] || '#ED6C00';
        el.style.cssText = `
          width:${d}px;height:${d}px;
          left:${v._x - minX + 20 - v._r}px;
          top:${v._y - minY + 20 - v._r}px;
          z-index:${v.s};
        `;
        const inner = document.createElement('div');
        inner.className = 'bubble__inner';
        inner.style.background = color;
        inner.style.fontSize = Math.max(8, v._r * 0.55) + 'px';
        if (v.s >= 7) {
          inner.textContent = (v.v >= 10000) ? Math.floor(v.v/10000) + '만' : Math.floor(v.v/1000) + 'K';
        }
        el.appendChild(inner);

        // Hover
        el.addEventListener('mouseenter', (e) => {
          ttThumb.src = `https://i.ytimg.com/vi/${v.i}/mqdefault.jpg`;
          ttChannel.textContent = v.c;
          ttTitle.textContent = v.t;
          ttViews.innerHTML = `조회수 <strong>${v.v.toLocaleString()}</strong>`;
          tooltip.classList.add('is-visible');
          positionTooltip(e);
        });
        el.addEventListener('mousemove', positionTooltip);
        el.addEventListener('mouseleave', () => {
          tooltip.classList.remove('is-visible');
        });

        container.appendChild(el);
      });

      mapEl.appendChild(container);

      // Scale to fit viewport
      const mapRect = mapEl.getBoundingClientRect();
      const scale = Math.min(mapRect.width / w, mapRect.height / h, 1) * 0.92;
      container.style.transform = `translate(-50%,-50%) scale(${scale})`;

      // Legend
      const channels = [...new Set(videos.map(v => v.c))];
      channels.forEach(ch => {
        const item = document.createElement('div');
        item.className = 'bubble-legend__item';
        const dot = document.createElement('span');
        dot.className = 'bubble-legend__dot';
        dot.style.background = CHANNEL_COLORS[ch] || '#ED6C00';
        const label = document.createElement('span');
        label.textContent = ch;
        item.appendChild(dot);
        item.appendChild(label);
        legendEl.appendChild(item);
      });
    });

  function positionTooltip(e) {
    const tw = 320, th = 240;
    let x = e.clientX + 16, y = e.clientY + 16;
    if (x + tw > window.innerWidth) x = e.clientX - tw - 16;
    if (y + th > window.innerHeight) y = e.clientY - th - 16;
    tooltip.style.left = x + 'px';
    tooltip.style.top = y + 'px';
  }
})();
</script>

</body>
</html>
